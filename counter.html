<!DOCTYPE HTML>
<html>
	<head>
		<style>
		h1{
			font-size:200px;
		}
	</style>
	</head>
   	<body>
    	<h1 id="header1">Tom isn't here</h1><br>
    	<h1 id="header2">direction</h1>
    <script src="js/app2.js"></script>
		<script type="text/javascript">
        	
              //-18 u beaconu
              //-80
              
            var isHere=undefined;
                      
         
            if ("WebSocket" in window){
            	var ws1 = new WebSocket("ws://mlha-139.sin.cvut.cz:1337/servers/00000001/events?topic=124%2FFFFFF0000E6D%2Frssi");    	
            	var ws2 = new WebSocket("ws://mlha-139.sin.cvut.cz:1337/servers/00000001/events?topic=124%2FFFFFF0000E6D%2Fstate");  
            	var ws3 = new WebSocket("ws://mlha-139.sin.cvut.cz:1337/servers/00000001/events?topic=124%2FFFFFF0000E6D%2Fbutton");  			       
               	
               	ws1.onmessage = function (evt) { 
                  	x = JSON.parse(evt.data).data;  
                  	x=Math.pow(10,((x+56)/(-30))).toFixed(1);
                  	
                  	document.getElementById("header1").innerHTML = "Tom is "+x+" m away";             
                }; 

				ws2.onmessage = function (evt) { 
                  	isHere = JSON.parse(evt.data).data; 
                  	if(isHere==0){
						document.getElementById("header1").innerHTML = "Tom isn't here";             
					} 
                }; 
                
                ws3.onmessage = function (evt) { 
                  	x = JSON.parse(evt.data).data;  
                  	document.getElementById("header2").innerHTML = x;             
                }; 
               
            }

            	

            	
            
    	</script>
   	</body>
</html>
